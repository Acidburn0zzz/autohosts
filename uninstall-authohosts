#!/bin/bash

# uninstalls autohosts

if [[ $EUID -ne 0 ]]; then
  echo "This script must be ran as root, or with sudo privileges."
  exit 1
fi

if [ -f /etc/autohosts.conf ];
then

  rm /etc/autohosts.conf
  echo -e "\n\e[32mConfig removed...\e[0m"
else
  echo -e "\e[31mAutohosts config not found, skipping...\e[0m"

fi

if [ -f /usr/local/bin/autohosts ];
then

  rm /usr/local/bin/autohosts
  echo -e "\e[32mExecutable removed...\e[0m"
else
  echo -e "\e[31mAutohosts executable not found, skipping...\e[0m"
fi

crontab -u root -l | grep -v '/usr/local/bin/autohosts'  | crontab -u root -
echo -e "\e[32mAutohosts crontab removed\e[0m"

cp /etc/hosts /tmp/hosts-backup
echo "0.0.0.0 localhost" > /etc/hosts
echo -e "\e[33m/etc/hosts has been cleared.  You will need to any custom entries.\n\e[0m\n"
echo -e "A backup has been temporarily copied to /tmp/hosts-backup if you need to save something from it.\nDone.\n"

exit 0
